{% extends "base_template.html" %}
{% block content %}
<script>
window.onload = function () {

var chart = new CanvasJS.Chart("port2-second-col", {
	animationEnabled: true,
	theme: "light2", //"light1", "dark1", "dark2"
	title:{
		text: "Pipeline of Positions"
	},
	data: [{
		type: "funnel",
		indexLabelPlacement: "inside",
		indexLabelFontColor: "white",
		toolTipContent: "<b>{label}</b>: {y} <b>({percentage}%)</b>",
		indexLabel: "{label} ({percentage}%)",
		dataPoints: {{data|safe}}
	}]
});
calculatePercentage();
chart.render();

function calculatePercentage() {
	var dataPoint = chart.options.data[0].dataPoints;
	var total = dataPoint[0].y;
	for(var i = 0; i < dataPoint.length; i++) {
		if(i == 0) {
			chart.options.data[0].dataPoints[i].percentage = 100;
		} else {
			chart.options.data[0].dataPoints[i].percentage = ((dataPoint[i].y / total) * 100).toFixed(2);
		}
	}
}

}
</script>
     <div id="content-wrapper">

        <div class="container-fluid">

          <!-- Breadcrumbs-->
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
                  {% if currentuser == "admin" %}
      <a href="{% url "adminhome" %}" class="btn btn-info" role="button">Current Month</a>                        
      {% else %}
      <a href="{% url "userhome" %}" class="btn btn-info" role="button">Current Month</a> 
      {% endif %}
      {% if currentuser == "admin" %}
      <a href="{% url "adminlastmonth" %}" class="btn btn-info" role="button">Last Month</a>
      {% else %}
     <a href="{% url "userlastmonth" %}" class="btn btn-info" role="button">Last Month</a>
      {% endif %}
            </li>  
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a class="btn btn-info" role="button" >Total Closure {{closejobcount}}</a>
  

          </ol>


 
        </div>

<script type="text/javascript" src="http://kozea.github.com/pygal.js/latest/pygal-tooltips.min.js"></script>
    <div class="container-fluid">
            <div class="row" id="port2-second-row">
                <div class="col-xs-6 imgcont" id="port2-first-col">
                    {{ chart_pie1|safe }}
                </div> <!-- end col-sm-6 -->
                <div class="col-xs-6 imgcont" id="port2-second-col">
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
                </div> <!-- end col-sm-6 -->

            </div> <!-- end port-second-row -->

              <div class="row" id="port2-second-row">
                <div class="col-xs-6 imgcont" id="port2-first-col">
                    {{ bar_graph1|safe }}
                </div> <!-- end col-sm-6 -->
                <div class="col-xs-6 imgcont" id="port2-second-col">
  <table id="example" class="table table-striped table-bordered" style="width:500px;table-layout:fixed">
    <thead>
      <tr>
        <th>Client</th>
        <th>Position</th>
        <th>BDM</th>
        <th>Count</th>
      </tr>
    </thead>
    <tbody>
 {% for value in table_list %}  
    <tr>
      <td>{{value.1}}</td>
      <td>{{value.2}}</td>
      <td>{{value.3}}</td>
      <td>{{value.0}}</td>
    </tr>
 {% endfor %} 
    </tbody>
  </table>
                </div> <!-- end col-sm-6 -->

            </div> <!-- end port-second-row -->

        <!-- /.container-fluid -->


  
        <!-- Sticky Footer -->
        <footer class="sticky-footer">
          <div class="container my-auto">
            <div class="copyright text-center my-auto">
              <span>Copyright Â© Your Website 2018</span>
            </div>
          </div>
        </footer>

      </div>
{% endblock content %}      